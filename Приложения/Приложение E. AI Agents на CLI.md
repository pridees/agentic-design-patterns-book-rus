# Приложение E - AI Agents на CLI

## Введение

Командная строка разработчика, долгое время бывшая оплотом точных, императивных команд, претерпевает глубокую трансформацию. Она эволюционирует от простой оболочки в интеллектуальное, совместное рабочее пространство, управляемое новым классом инструментов: AI Agent Command-Line Interfaces (CLIs). Эти агенты выходят за рамки простого выполнения команд; они понимают естественный язык, поддерживают контекст о всей вашей кодовой базе и могут выполнять сложные многоэтапные задачи, автоматизирующие значительные части жизненного цикла разработки.

Это руководство предоставляет глубокий взгляд на четыре ведущих игрока в этой зарождающейся области, исследуя их уникальные сильные стороны, идеальные случаи использования и различные философии, чтобы помочь вам определить, какой инструмент лучше всего подходит для вашего рабочего процесса. Важно отметить, что многие примеры случаев использования, предоставленные для конкретного инструмента, часто могут быть выполнены другими агентами. Ключевое различие между этими инструментами часто заключается в качестве, эффективности и нюансах результатов, которые они способны достичь для данной задачи. Существуют специальные бенчмарки, предназначенные для измерения этих возможностей, которые будут обсуждаться в следующих разделах.

## Claude CLI (Claude Code)

Claude CLI от Anthropic разработан как высокоуровневый агент кодирования с глубоким, целостным пониманием архитектуры проекта. Его основная сила заключается в его "агентной" природе, позволяющей создавать ментальную модель вашего репозитория для сложных многоэтапных задач. Взаимодействие высоко конверсационное, напоминающее сессию парного программирования, где он объясняет свои планы перед выполнением. Это делает его идеальным для профессиональных разработчиков, работающих над крупномасштабными проектами, включающими значительный рефакторинг или реализацию функций с широким архитектурным воздействием.

**Примеры случаев использования:**

1. **Крупномасштабный рефакторинг:** Вы можете дать ему указание: "Наша текущая аутентификация пользователей полагается на сессионные куки. Рефакторьте всю кодовую базу для использования stateless JWTs, обновив эндпоинты входа/выхода, middleware и обработку токенов на фронтенде." Claude затем прочитает все соответствующие файлы и выполнит скоординированные изменения.

2. **Интеграция API:** После предоставления спецификации OpenAPI для нового сервиса погоды, вы можете сказать: "Интегрируйте этот новый API погоды. Создайте сервисный модуль для обработки вызовов API, добавьте новый компонент для отображения погоды и обновите главную панель, чтобы включить его."

3. **Генерация документации:** Указывая на сложный модуль с плохо документированным кодом, вы можете спросить: "Проанализируйте файл `./src/utils/data_processing.js`. Сгенерируйте комплексные TSDoc комментарии для каждой функции, объясняя её назначение, параметры и возвращаемое значение."

Claude CLI функционирует как специализированный помощник по кодированию с встроенными инструментами для основных задач разработки, включая поглощение файлов, анализ структуры кода и генерацию правок. Его глубокая интеграция с Git облегчает прямое управление ветками и коммитами. Расширяемость агента опосредована Multi-tool Control Protocol (MCP), позволяя пользователям определять и интегрировать пользовательские инструменты. Это позволяет взаимодействовать с приватными API, запросами к базе данных и выполнением специфичных для проекта скриптов. Эта архитектура позиционирует разработчика как арбитра функциональной области агента, эффективно характеризуя Claude как движок рассуждений, усиленный пользовательскими инструментами.

## Gemini CLI

Gemini CLI от Google - это универсальный, открытый AI агент, разработанный для мощности и доступности. Он выделяется продвинутой моделью Gemini 2.5 Pro, массивным контекстным окном и мультимодальными возможностями (обработка изображений и текста). Его открытая природа, щедрый бесплатный уровень и цикл "Рассуждай и Действуй" делают его прозрачным, контролируемым и отличным универсальным решением для широкой аудитории, от любителей до корпоративных разработчиков, особенно тех, кто находится в экосистеме Google Cloud.

**Примеры случаев использования:**

1. **Мультимодальная разработка:** Вы предоставляете скриншот веб-компонента из файла дизайна (`gemini describe component.png`) и даете указание: "Напишите HTML и CSS код для создания React компонента, который выглядит точно так же. Убедитесь, что он адаптивный."

2. **Управление облачными ресурсами:** Используя его встроенную интеграцию с Google Cloud, вы можете командовать: "Найдите все кластеры GKE в проекте `production`, которые работают на версиях старше 1.28, и сгенерируйте команду `gcloud` для их поочередного обновления."

3. **Интеграция корпоративных инструментов (через MCP):** Разработчик предоставляет Gemini пользовательский инструмент под названием `get-employee-details`, который подключается к внутреннему HR API компании. Промпт: "Составьте приветственный документ для нашего нового сотрудника. Сначала используйте инструмент `get-employee-details --id=E90210` для получения его имени и команды, а затем заполните `welcome_template.md` этой информацией."

4. **Крупномасштабный рефакторинг:** Разработчику нужно рефакторить большую Java кодовую базу для замены устаревшей библиотеки логирования на новую структурированную систему логирования. Они могут использовать Gemini с промптом типа: "Прочитайте все \*.java файлы в директории 'src/main/java'. Для каждого файла замените все экземпляры импорта 'org.apache.log4j' и его класса 'Logger' на 'org.slf4j.Logger' и 'LoggerFactory'. Перепишите инициализацию логгера и все вызовы .info(), .debug() и .error() для использования нового структурированного формата с парами ключ-значение."

Gemini CLI оснащен набором встроенных инструментов, которые позволяют ему взаимодействовать со своей средой. К ним относятся инструменты для операций с файловой системой (такие как чтение и запись), инструмент оболочки для выполнения команд и инструменты для доступа к интернету через веб-запросы и поиск. Для более широкого контекста он использует специализированные инструменты для одновременного чтения нескольких файлов и инструмент памяти для сохранения информации для последующих сессий. Эта функциональность построена на безопасной основе: песочница изолирует действия модели для предотвращения рисков, в то время как MCP серверы действуют как мост, позволяя Gemini безопасно подключаться к вашей локальной среде или другим API.

## Aider

Aider - это открытый AI помощник по кодированию, который действует как настоящий парный программист, работая напрямую с вашими файлами и коммитя изменения в Git. Его определяющая особенность - это его прямолинейность; он применяет правки, запускает тесты для их валидации и автоматически коммитит каждое успешное изменение. Будучи агностичным к модели, он дает пользователям полный контроль над стоимостью и возможностями. Его git-центричный рабочий процесс делает его идеальным для разработчиков, которые ценят эффективность, контроль и прозрачный, проверяемый след всех модификаций кода.

**Примеры случаев использования:**

1. **Разработка через тестирование (TDD):** Разработчик может сказать: "Создайте падающий тест для функции, которая вычисляет факториал числа." После того как Aider напишет тест и он упадет, следующий промпт: "Теперь напишите код, чтобы тест прошел." Aider реализует функцию и снова запускает тест для подтверждения.

2. **Точное исправление багов:** Учитывая отчет об ошибке, вы можете дать указание Aider: "Функция `calculate_total` в `billing.py` не работает в високосные годы. Добавьте файл в контекст, исправьте баг и проверьте ваше исправление против существующего набора тестов."

3. **Обновления зависимостей:** Вы можете дать ему указание: "Наш проект использует устаревшую версию библиотеки 'requests'. Пожалуйста, пройдитесь по всем Python файлам, обновите операторы импорта и любые устаревшие вызовы функций для совместимости с последней версией, а затем обновите `requirements.txt`."

## GitHub Copilot CLI

GitHub Copilot CLI расширяет популярного AI парного программиста в терминал, с его основным преимуществом в нативной, глубокой интеграции с экосистемой GitHub. Он понимает контекст проекта _в рамках GitHub_. Его агентные возможности позволяют ему быть назначенным на GitHub issue, работать над исправлением и отправлять pull request для человеческого обзора.

**Примеры случаев использования:**

1. **Автоматическое разрешение проблем:** Менеджер назначает тикет с багом (например, "Issue #123: Исправить ошибку off-by-one в пагинации") агенту Copilot. Агент затем создает новую ветку, пишет код и отправляет pull request, ссылающийся на issue, все без ручного вмешательства разработчика.

2. **Осведомленный о репозитории Q&A:** Новый разработчик в команде может спросить: "Где в этом репозитории определена логика подключения к базе данных и какие переменные окружения она требует?" Copilot CLI использует свою осведомленность о всем репо для предоставления точного ответа с путями к файлам.

3. **Помощник по командам оболочки:** Когда не уверены в сложной команде оболочки, пользователь может спросить: `gh? find all files larger than 50MB, compress them, and place them in an archive folder`. Copilot сгенерирует точную команду оболочки, необходимую для выполнения задачи.

## Terminal-Bench: Бенчмарк для AI агентов в командных интерфейсах

Terminal-Bench - это новая система оценки, предназначенная для оценки мастерства AI агентов в выполнении сложных задач в рамках командного интерфейса. Терминал идентифицируется как оптимальная среда для работы AI агентов благодаря его текстовой, изолированной природе. Первоначальный релиз, Terminal-Bench-Core-v0, включает 80 вручную курированных задач, охватывающих такие области, как научные рабочие процессы и анализ данных. Для обеспечения справедливых сравнений был разработан Terminus, минималистичный агент, для служения стандартизированным тестовым стендом для различных языковых моделей. Фреймворк разработан для расширяемости, позволяя интеграцию разнообразных агентов через контейнеризацию или прямые соединения. Будущие разработки включают включение массово параллельных оценок и интеграцию установленных бенчмарков. Проект поощряет открытые вклады для расширения задач и совместного улучшения фреймворка.

## Заключение

Появление этих мощных AI командных агентов знаменует фундаментальный сдвиг в разработке программного обеспечения, трансформируя терминал в динамичную и совместную среду. Как мы видели, не существует единого "лучшего" инструмента; вместо этого формируется яркая экосистема, где каждый агент предлагает специализированную силу. Идеальный выбор полностью зависит от потребностей разработчика: Claude для сложных архитектурных задач, Gemini для универсального и мультимодального решения проблем, Aider для git-центричного и прямого редактирования кода, и GitHub Copilot для бесшовной интеграции в GitHub рабочий процесс. По мере того как эти инструменты продолжают эволюционировать, мастерство в их использовании станет важным навыком, фундаментально изменяя то, как разработчики создают, отлаживают и управляют программным обеспечением.

## Ссылки

1. [Anthropic. _Claude_](https://docs.anthropic.com/en/docs/claude-code/cli-reference)
2. [Google Gemini CLI](https://github.com/google-gemini/gemini-cli)
3. [Aider](https://aider.chat/)
4. [GitHub Copilot CLI](https://docs.github.com/en/copilot/github-copilot-enterprise/copilot-cli)
5. [Terminal Bench](https://www.tbench.ai/)

---

## Навигация

**Назад:** [Приложение D. Создание агента с AgentSpace](Приложение%20D.%20Создание%20агента%20с%20AgentSpace.md)  
**Вперед:** [Приложение F. Под капотом - взгляд изнутри на механизмы рассуждения агентов](Приложение%20F.%20Под%20капотом%20-%20взгляд%20изнутри%20на%20механизмы%20рассуждения%20агентов.md)
