# Предисловие

Добро пожаловать в «Шаблоны агентного проектирования: практическое руководство по созданию интеллектуальных систем». Если оглянуться на ландшафт современного искусственного интеллекта, становится очевидной эволюция от простых, реактивных программ к сложным, автономным сущностям, способным понимать контекст, принимать решения и динамически взаимодействовать со своей средой и другими системами. Это и есть интеллектуальные агенты и образуемые ими агентные системы.

Появление мощных крупных языковых моделей (LLM) обеспечило беспрецедентные возможности для понимания и генерации человекоподобного контента — текста и медиа, — выступая когнитивным «двигателем» для многих из таких агентов. Однако оркестровка этих возможностей в системы, которые надёжно достигают сложных целей, требует большего, чем просто мощная модель. Нужны структура, дизайн и продуманный подход к тому, как агент воспринимает, планирует, действует и взаимодействует.

Представьте создание интеллектуальных систем как работу над сложным произведением искусства или инженерии на канве. Эта канва — не пустое визуальное пространство, а базовая инфраструктура и фреймворки, предоставляющие среду и инструменты для существования и работы ваших агентов. Это фундамент, на котором вы строите интеллектуальное приложение, управляя состоянием, коммуникацией, доступом к инструментам и ходом логики.

Эффективная работа на этой агентной канве требует большего, чем просто механическая сборка компонентов. Необходимо понимание проверенных приёмов — **шаблонов**, — которые решают типовые задачи проектирования и реализации поведения агентов. Подобно тому как архитектурные шаблоны направляют возведение здания, а шаблоны проектирования структурируют программное обеспечение, шаблоны агентного проектирования предлагают многократно используемые решения повторяющихся проблем, с которыми вы столкнётесь, оживляя интеллектуальных агентов на выбранной вами канве.

# Что такое агентные системы?

В своей основе агентная система — это вычислительная сущность, предназначенная для восприятия окружающей среды (цифровой и, возможно, физической), принятия обоснованных решений на основе этих восприятий и заданных или приобретённых целей, а также выполнения действий для автономного достижения этих целей. В отличие от традиционного ПО, которое следует жёстким пошаговым инструкциям, агенты проявляют определённую гибкость и инициативу.

Предположим, вам нужна система для обработки клиентских запросов. Традиционная система может следовать фиксированному сценарию. Агентная система, напротив, способна уловить нюансы запроса клиента, обратиться к базам знаний, взаимодействовать с другими внутренними системами (например, управлением заказами), при необходимости задавать уточняющие вопросы и проактивно разрешать проблему, возможно даже предугадывая будущие потребности. Эти агенты работают на канве инфраструктуры вашего приложения, используя предоставляемые им сервисы и данные.

Агентные системы часто характеризуются такими свойствами, как **автономность**, позволяющая действовать без постоянного человеческого надзора; **проактивность**, то есть инициирование действий для достижения целей; и **реактивность**, то есть способность эффективно отвечать на изменения среды. Они по своей природе **целеориентированы**, постоянно стремясь к достижению поставленных задач. Критически важной способностью является **использование инструментов**, дающее возможность взаимодействовать с внешними API, базами данных или сервисами — фактически выходить за пределы непосредственной канвы. Они обладают **памятью**, сохраняют информацию между взаимодействиями и могут осуществлять **коммуникацию** с пользователями, другими системами или даже другими агентами, действующими на той же или связанной канве.

Эффективная реализация этих характеристик влечёт за собой значительную сложность. Как агент поддерживает состояние на протяжении многих шагов на своей канве? Как он решает, _когда_ и _как_ использовать инструмент? Как организовать коммуникацию между разными агентами? Как обеспечить устойчивость системы к неожиданным результатам или ошибкам?

# Почему шаблоны важны при разработке агентов

Именно эта сложность делает шаблоны агентного проектирования незаменимыми. Это не жёсткие правила, а проверенные на практике заготовки и чертежи, предлагающие надёжные подходы к стандартным задачам проектирования и реализации в области агентов. Узнавая и применяя эти шаблоны, вы получаете решения, повышающие структурированность, сопровождаемость, надёжность и эффективность создаваемых на вашей канве агентов.

Использование шаблонов проектирования помогает избежать «изобретения велосипеда» в таких задачах, как управление диалоговым потоком, интеграция внешних возможностей или координация действий нескольких агентов. Они предоставляют общий язык и структуру, которые делают логику агента более ясной и понятной для других (и для вас самих в будущем). Внедрение шаблонов, ориентированных на обработку ошибок или управление состоянием, непосредственно способствует созданию более устойчивых и надёжных систем. Опора на устоявшиеся подходы ускоряет разработку, позволяя сосредоточиться на уникальных аспектах вашего приложения, а не на базовой механике поведения агентов.

В этой книге выделены 21 ключевой шаблон, представляющий фундаментальные строительные блоки и приёмы для конструирования сложных агентов на различных технических канвах. Понимание и применение этих шаблонов заметно повысит вашу способность эффективно проектировать и реализовывать интеллектуальные системы.

# Обзор книги и как ей пользоваться

Эта книга — «Шаблоны агентного проектирования: практическое руководство по созданию интеллектуальных систем» — создана как практичный и доступный ресурс. Её главная цель — ясно объяснить каждый агентный шаблон и снабдить его конкретными, запускаемыми примерами кода, демонстрирующими реализацию. В 21 отдельной главе мы рассмотрим широкий спектр шаблонов — от базовых понятий, таких как структурирование последовательных операций (цепочки подсказок, Prompt Chaining) и внешнее взаимодействие (использование инструментов, Tool Use), до более продвинутых тем: совместная работа (межагентная кооперация, Multi‑Agent Collaboration) и самоулучшение (самокоррекция, Self‑Correction).

Книга организована по главам, и каждая глава посвящена одному агентному шаблону. Внутри каждой главы вы найдёте:

- Подробный **обзор шаблона**, чётко объясняющий суть и роль шаблона в агентном проектировании.
- Раздел **практических применений и сценариев использования**, иллюстрирующий реальные ситуации и выгоды от применения шаблона.
- **Практический пример кода**, предлагающий наглядный, запускаемый пример реализации с использованием распространённых фреймворков для разработки агентов. Здесь вы увидите, как применять шаблон в контексте технической канвы.
- **Ключевые выводы**, суммирующие наиболее важные моменты для быстрого повторения.
- **Ссылки** для дальнейшего изучения, указывающие источники по теме и родственным концепциям.

Хотя главы расположены в порядке поступательного наращивания сложности, книгу удобно использовать как справочник, переходя непосредственно к тем главам, которые относятся к вашим текущим задачам разработки агентов. Приложения дают всесторонний взгляд на продвинутые приёмы промптинга, принципы применения ИИ‑агентов в реальной среде и обзор ключевых фреймворков для агентов. В дополнение включены практические онлайн‑материалы, предлагающие пошаговые руководства по созданию агентов на конкретных платформах, таких как AgentSpace, а также для интерфейса командной строки. На протяжении всей книги сделан упор на практику: мы настоятельно рекомендуем запускать примеры кода, экспериментировать с ними и адаптировать их для построения собственных интеллектуальных систем на выбранной вами канве.

Часто мне задают вопрос: «Если ИИ меняется так быстро, зачем писать книгу, которая быстро устареет?» На самом деле моя мотивация была противоположной. Именно потому, что всё меняется стремительно, нам необходимо на шаг отступить и выделить базовые принципы, которые закрепляются. Такие шаблоны, как RAG (генерация с дополнением извлечённой информации), Reflection (рефлексия), Routing (маршрутизация), Memory (память) и другие, о которых я говорю, становятся фундаментальными строительными блоками. Эта книга — приглашение поразмышлять над этими ключевыми идеями, обеспечивающими основу, на которую мы можем опираться. Нам, людям, необходимы такие моменты рефлексии над базовыми шаблонами.

# Введение в используемые фреймворки

Чтобы предоставить осязаемую «канву» для наших примеров кода (см. также Приложение), мы в основном будем использовать три заметных фреймворка для разработки агентов. **LangChain** вместе со своим расширением с поддержкой состояния **LangGraph** предлагает гибкий способ объединять языковые модели и другие компоненты, предоставляя надёжную канву для построения сложных последовательностей и графов операций. **Crew AI** предоставляет структурированный фреймворк, специально разработанный для оркестрации множества ИИ‑агентов, ролей и задач, выступая канвой, особенно подходящей для систем совместной работы агентов. **Google Agent Developer Kit (Google ADK)** предлагает инструменты и компоненты для создания, оценки и развёртывания агентов, предоставляя ещё одну ценную канву, часто интегрированную с инфраструктурой ИИ Google.

Эти фреймворки представляют разные грани канвы разработки агентов, и у каждого есть свои сильные стороны. Показывая примеры на основе этих инструментов, вы получите более широкое понимание того, как шаблоны можно применять независимо от конкретной технической среды, выбранной для ваших агентных систем. Примеры нацелены на наглядное раскрытие ключевой логики шаблона и его реализации на канве соответствующего фреймворка, с акцентом на ясность и практичность.

К концу книги вы не только поймёте фундаментальные концепции, лежащие в основе 21 ключевого агентного шаблона, но и получите практические знания и примеры кода для их эффективного применения, что позволит вам создавать более интеллектуальные, способные и автономные системы на выбранной вами канве разработки. Приступим к этому практическому путешествию!

---

## Навигация

**Назад:** [Предисловие](0.%20Предисловие.md)  
**Вперед:** [Что делает AI систему агентом?](2.%20Что%20делает%20AI%20систему%20агентом.md)
